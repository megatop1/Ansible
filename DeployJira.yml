#The playbook will do the following
#1. Download the latest version of java CHECK
#2. Download MariaDB CHECK
#3. Create MariaDB Database
#4. Create a jira database user with correct permissions 
#5. Create directory named software
#6. Download the jira bin file from atlassian website
#7. run command chmod 700 bin-file to give it permissions
#8. run through the jira executable: ./bin
#9. create firewall rules for jira like opening port 8080

---   #Every Ansible Playbook starts with 3 "-"
- name: Jira           #Name of the playbook
  hosts: all           #Affects all hosts
  gather_facts: true   #Get variable names and facts
  become: true         #Become root when running the commands 
  
  tasks: 
    - name: install java
      yum:
        name:
          - java
      state: latest
      
    -name: download jira from atlassian website   #Name of the task
      get_url:      #This functions means we need to download something from a URL 
        url: https://www.atlassian.com/software/jira/downloads/binary/atlassian-jira-software-8.7.1-x64.bin   #This performs the download
        dest: /software   #This is where our file is being downloaded too
        
    -name: extract jira packages
      unarchive: 
        src: /software/atlassian-jira-software-8.7.1-x64.bin
        remote_src: yes
    
    -name: start jira services    #This task will ensure that even though we log out from the server, the service continously runs in the background
     shell: /opt/atlassian/jira/bin/startup.sh #This is the shell command being ran 
    
